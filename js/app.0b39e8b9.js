(function(){"use strict";var t={9844:function(t,e,a){a.d(e,{Q:function(){return Wt}});var s=a(2856),o=a(1910),i=a(2257),r=a(5366),n=(a(323),a(9466)),l=a.n(n),c=a(876),d=a(2908),u=a(7610),p=a(8995),m=a(3162),g=a(3178),v=a(5173),h=a.n(v),f=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},_=[],C=a(1656),b={},x=(0,C.A)(b,f,_,!1,null,null,null),y=x.exports,w=a(1594),k=function(){var t=this,e=t._self._c;return e("div",[e("Navbar"),e("Alert"),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("Sidebar"),e("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-md-4",attrs:{role:"main"}},[e("router-view")],1)],1)])],1)},P=[],A=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow"},[e("router-link",{staticClass:"navbar-brand col-md-3 col-lg-2 mr-0 px-3",attrs:{to:"/"}},[t._v("Alex Store")]),t._m(0),e("ul",{staticClass:"navbar-nav px-3"},[e("li",{staticClass:"nav-item text-nowrap"},[e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signout.apply(null,arguments)}}},[t._v("登出")])])])],1)},L=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"navbar-toggler position-absolute d-md-none collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],M=(a(4114),{methods:{signout(){const t=this,e="https://vue-course-api.hexschool.io",a=`${e}/logout`;this.$http.post(a).then((e=>{console.log(e),e.data.success&&(alert(e.data.message),t.$router.push("/login"))}))}}}),N=M,O=(0,C.A)(N,A,L,!1,null,null,null),D=O.exports,T=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse",attrs:{id:"sidebarMenu"}},[e("div",{staticClass:"sidebar-sticky pt-3"},[t._m(0),e("ul",{staticClass:"nav flex-column mb-2"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[e("font-awesome-icon",{attrs:{icon:["fas","box"]}}),t._v(" 產品列表 ")],1),e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/order"}},[e("font-awesome-icon",{attrs:{icon:["fas","list-ul"]}}),t._v(" 訂單列表 ")],1),e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/coupon"}},[e("font-awesome-icon",{attrs:{icon:["fas","ticket"]}}),t._v(" 優惠券 ")],1)],1)]),t._m(1),e("ul",{staticClass:"nav flex-column mb-2"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/customer_orders"}},[e("font-awesome-icon",{attrs:{icon:["fas","cart-shopping"]}}),t._v(" 模擬訂單 ")],1)],1)])])])},S=[function(){var t=this,e=t._self._c;return e("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[e("span",[t._v("管理員")]),e("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#","aria-label":"Add a new report"}},[e("span",{attrs:{"data-feather":"plus-circle"}})])])},function(){var t=this,e=t._self._c;return e("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[e("span",[t._v("模擬功能")]),e("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#","aria-label":"Add a new report"}},[e("span",{attrs:{"data-feather":"plus-circle"}})])])}],q={},j=(0,C.A)(q,T,S,!1,null,null,null),I=j.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-alert"},t._l(t.messages,(function(a,s){return e("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+a.status},[t._v(" "+t._s(a.message)+" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)},U=[],G={name:"Alert",data(){return{messages:[]}},methods:{updateMessage(t,e){const a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage(t){this.messages.splice(t,1)},removeMessageWithTiming(t){const e=this;setTimeout((()=>{e.messages.forEach(((a,s)=>{a.timestamp===t&&e.messages.splice(s,1)}))}),5e3)}},created(){const t=this;t.$bus.$on("message:push",((e,a="warning")=>{t.updateMessage(e,a)}))}},F=G,R=(0,C.A)(F,E,U,!1,null,null,null),z=R.exports,H={components:{Navbar:D,Sidebar:I,Alert:z}},B=H,W=(0,C.A)(B,k,P,!1,null,null,null),Y=W.exports,Q=function(){var t=this,e=t._self._c;return e("div",[e("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.loginHandler.apply(null,arguments)}}},[e("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("請先登入")]),e("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),e("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._m(0),e("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("Sign in")]),e("p",{staticClass:"mt-5 mb-3 text-muted"},[t._v("© "+t._s((new Date).getFullYear()))])])])},V=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"checkbox mb-3"},[e("label",[e("input",{attrs:{type:"checkbox",value:"remember-me"}}),t._v(" Remember me ")])])}],X={name:"Login",data(){return{user:{username:"",password:""}}},methods:{loginHandler(){const t=this,e="https://vue-course-api.hexschool.io";console.log(e);const a=`${e}/admin/signin`;this.$http.post(a,t.user).then((e=>{if(console.log(e),e.data.success){const a=e.data.token,s=e.data.expired;console.log(a,s),document.cookie=`hexToken=${a}; expires=${new Date(s)}`,t.$router.push("/admin/products")}}))}}},J=X,K=(0,C.A)(J,Q,V,!1,null,"36c27f14",null),Z=K.exports,tt=function(){var t=this,e=t._self._c;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("div",{staticClass:"d-flex justify-content-end my-3"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新的產品")])]),e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.products,(function(a){return e("tr",{key:a.id},[e("td",{attrs:{width:"120"}},[t._v(t._s(a.category))]),e("td",[t._v(t._s(a.title))]),e("td",{staticClass:"text-right",attrs:{width:"80"}},[t._v(t._s(t._f("currency")(a.origin_price)))]),e("td",{staticClass:"text-right",attrs:{width:"80"}},[t._v(t._s(t._f("currency")(a.price)))]),a.is_enabled?e("td",{staticClass:"text-success",attrs:{width:"120"}},[t._v("啟用")]):e("td",{attrs:{width:"120"}},[t._v("未啟用")]),e("td",{attrs:{width:"140"}},[e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){return t.openModal(!1,a)}}},[t._v("編輯")]),e("button",{staticClass:"btn btn-outline-danger",on:{click:function(e){return t.openDeleteModal(a)}}},[t._v("刪除")])])])])})),0)]),e("Pagination",{attrs:{pagination:t.pagination}}),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v(t._s(t.updateTitle))])]),t._m(1)]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"customFile"}},[t._v("或 上傳圖片 "),t.status.fileUploading?e("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:"","spin-reverse":""}}):t._e()],1),e("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),e("img",{staticClass:"img-fluid",attrs:{src:t.tempProduct.imageUrl,alt:""}})]),e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("標題")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"category"}},[t._v("分類")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})]),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("單位")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"origin_price"}},[t._v("原價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})]),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("售價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),e("hr"),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("產品描述")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"content"}},[t._v("說明內容")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(e){var a=t.tempProduct.is_enabled,s=e.target,o=s.checked?1:0;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&t.$set(t.tempProduct,"is_enabled",a.concat([i])):r>-1&&t.$set(t.tempProduct,"is_enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempProduct,"is_enabled",o)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v(" 是否啟用 ")])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v(" 商品(刪除後將無法恢復)。 ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteProduct(t.tempProduct.id)}}},[t._v("確認刪除")])])])])])],1)},et=[function(){var t=this,e=t._self._c;return e("thead",[e("th",[t._v("產品分類")]),e("th",[t._v("產品名稱")]),e("th",[t._v("原價")]),e("th",[t._v("售價")]),e("th",[t._v("是否啟用")]),e("th",[t._v("編輯")])])},function(){var t=this,e=t._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("刪除產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],at=a(755),st=a.n(at),ot={name:"Products",data(){return{products:[],tempProduct:{title:"",category:"",origin_price:"",price:"",unit:"",image:"",description:"",content:"",is_enabled:"",imageUrl:""},isNew:!1,updateTitle:"",status:{fileUploading:!1},pagination:{}}},computed:{isLoading(){return this.$store.state.isLoading}},methods:{getProducts(t=1){const e=this;e.$store.dispatch("updateLoading",!0);const a="https://vue-course-api.hexschool.io",s="alex12030321";e.$http.get(`${a}/api/${s}/admin/products?page=${t}`).then((t=>{e.products=t.data.products,e.pagination=t.data.pagination,e.$store.dispatch("updateLoading",!1)}))},openModal(t,e){t?(this.tempProduct={},this.isNew=!0,this.updateTitle="新增產品"):(this.tempProduct=Object.assign({},e),this.isNew=!1,this.updateTitle=`編輯：${this.tempProduct.title}`),st()("#productModal").modal("show")},updateProduct(){const t=this,e="https://vue-course-api.hexschool.io",a="alex12030321";let s=`${e}/api/${a}/admin/product`,o="post";t.isNew||(s=`${e}/api/${a}/admin/product/${t.tempProduct.id}`,o="put"),t.$http[o](s,{data:t.tempProduct}).then((e=>{e.data.success?(st()("#productModal").modal("hide"),alert(e.data.message),t.getProducts()):(st()("#productModal").modal("hide"),t.$bus.$emit("message:push",e.data.message,"danger"),t.getProducts())}))},openDeleteModal(t){this.tempProduct={...t},st()("#delProductModal").modal("show")},deleteProduct(t){const e=this,a="https://vue-course-api.hexschool.io",s="alex12030321";let o=`${a}/api/${s}/admin/product/${t}`,i="delete";e.$http[i](o).then((t=>{t.data.success?(st()("#delProductModal").modal("hide"),e.getProducts(),alert(t.data.message)):(st()("#delProductModal").modal("hide"),e.getProducts(),e.$bus.$emit("message:push",t.data.message,"danger"))}))},uploadFile(){const t=this.$refs.files.files[0],e=this;e.status.fileUploading=!0;const a=new FormData;a.append("file-to-upload",t);const s="https://vue-course-api.hexschool.io/api/alex12030321/admin/upload";this.$http.post(s,a,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{e.status.fileUploading=!1,t.data.success?(e.$set(e.tempProduct,"imageUrl",t.data.imageUrl),document.querySelector("#customFile").value=""):e.$bus.$emit("message:push",t.data.message,"danger")}))}},created(){this.getProducts(),this.$bus.$on("pageClick",((t=1)=>{this.getProducts(t)}))}},it=ot,rt=(0,C.A)(it,tt,et,!1,null,null,null),nt=rt.exports,lt=function(){var t=this,e=t._self._c;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("div",{staticClass:"d-flex justify-content-end my-3"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新的優惠券")])]),e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.coupons,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.title))]),e("td",[t._v(t._s(a.code))]),e("td",[t._v(t._s(t._f("dateToString")(a.due_date)))]),e("td",{staticClass:"text-right",attrs:{width:"80"}},[t._v(t._s(t._f("percentage")(a.percent)))]),a.is_enabled?e("td",{staticClass:"text-success",attrs:{width:"120"}},[t._v("啟用")]):e("td",{attrs:{width:"120"}},[t._v("未啟用")]),e("td",{attrs:{width:"140"}},[e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){return t.openModal(!1,a)}}},[t._v("編輯")]),e("button",{staticClass:"btn btn-outline-danger",on:{click:function(e){return t.openDeleteModal(a)}}},[t._v("刪除")])])])])})),0)]),e("Pagination",{attrs:{pagination:t.pagination}}),e("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v(t._s(t.updateTitle))])]),t._m(1)]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("標題")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"code"}},[t._v("優惠代碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"code",placeholder:"請輸入優惠代碼"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"origin_price"}},[t._v("折扣數")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入折扣",max:"100",min:"0"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"due_date"}},[t._v("有效日期")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dateString,expression:"dateString"}],staticClass:"form-control",attrs:{type:"date",id:"due_date"},domProps:{value:t.dateString},on:{input:function(e){e.target.composing||(t.dateString=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(e){var a=t.tempCoupon.is_enabled,s=e.target,o=s.checked?1:0;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&t.$set(t.tempCoupon,"is_enabled",a.concat([i])):r>-1&&t.$set(t.tempCoupon,"is_enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempCoupon,"is_enabled",o)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v(" 是否啟用 ")])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("確認")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"delCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v(" 優惠券(刪除後將無法恢復)。 ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteCoupon(t.tempCoupon.id)}}},[t._v("確認刪除")])])])])])],1)},ct=[function(){var t=this,e=t._self._c;return e("thead",[e("th",[t._v("優惠券名稱")]),e("th",[t._v("優惠代碼")]),e("th",[t._v("有效日期")]),e("th",[t._v("折扣數")]),e("th",[t._v("是否啟用")]),e("th",[t._v("編輯")])])},function(){var t=this,e=t._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("刪除優惠券")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],dt={name:"Coupon",data(){return{coupons:[],pageClick:{},tempCoupon:{due_date:Date.now(),id:"",is_enabled:0,percent:100,title:"",code:""},updateTitle:"",isNew:!0,pagination:{}}},computed:{dateString:{get(){return new Date(this.tempCoupon.due_date).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}).replaceAll("/","-")},set(t){this.tempCoupon.due_date=new Date(t)}},isLoading(){return this.$store.state.isLoading}},filters:{dateToString(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"}).replaceAll("/","-")},percentage(t){return t+" %"}},methods:{getCoupons(t=1){const e=this;e.$store.dispatch("updateLoading",!0);const a="https://vue-course-api.hexschool.io",s="alex12030321";e.$http.get(`${a}/api/${s}/admin/coupons?page=${t}`).then((t=>{e.coupons=t.data.coupons,e.pagination=t.data.pagination,e.$store.dispatch("updateLoading",!1)}))},updateCoupon(){const t=this,e="https://vue-course-api.hexschool.io",a="alex12030321";let s=`${e}/api/${a}/admin/coupon`,o="post";t.isNew||(s=`${e}/api/${a}/admin/coupon/${t.tempCoupon.id}`,o="put"),t.$http[o](s,{data:t.tempCoupon}).then((e=>{e.data.success?(st()("#couponModal").modal("hide"),alert(e.data.message),t.getCoupons()):(st()("#couponModal").modal("hide"),t.$bus.$emit("message:push",e.data.message,"danger"),t.getCoupons())}))},deleteCoupon(t){const e=this,a="https://vue-course-api.hexschool.io",s="alex12030321";let o=`${a}/api/${s}/admin/coupon/${t}`,i="delete";e.$http[i](o).then((t=>{t.data.success?(st()("#delCouponModal").modal("hide"),e.getCoupons(),alert(t.data.message)):(st()("#delCouponModal").modal("hide"),e.getCoupons(),e.$bus.$emit("message:push",t.data.message,"danger"))}))},openModal(t,e){t?(this.tempCoupon={},this.isNew=!0,this.updateTitle="新增優惠券"):(this.tempCoupon=Object.assign({},e),this.isNew=!1,this.updateTitle=`編輯：${this.tempCoupon.title}`),st()("#couponModal").modal("show")},openDeleteModal(t){this.tempCoupon={...t},st()("#delCouponModal").modal("show")}},created(){this.getCoupons()}},ut=dt,pt=(0,C.A)(ut,lt,ct,!1,null,null,null),mt=pt.exports,gt=function(){var t=this,e=t._self._c;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("table",{staticClass:"table my-5"},[t._m(0),e("tbody",t._l(t.orders,(function(a){return e("tr",{key:a.id},[e("td",{attrs:{width:"80"}},[t._v(t._s(new Date(1e3*a.create_at).toLocaleDateString(void 0,{year:"numeric",month:"2-digit",day:"2-digit"})))]),e("td",{attrs:{width:"120"}},[t._v(t._s(a.user?a.user.email:""))]),e("td",{attrs:{width:"150"}},t._l(a.products,(function(a){return e("div",[t._v(t._s(a.product.title)+"："+t._s(a.qty)+" "+t._s(a.product.unit))])})),0),e("td",{staticClass:"text-right",attrs:{width:"150"}},[t._v(t._s(t._f("currency")(a.total)))]),a.is_paid?e("td",{staticClass:"text-success",attrs:{width:"120"}},[t._v("已付款")]):e("td",{attrs:{width:"120"}},[t._v("尚未付款")])])})),0)]),e("Pagination",{attrs:{pagination:t.pagination}})],1)},vt=[function(){var t=this,e=t._self._c;return e("thead",[e("th",[t._v("購買時間")]),e("th",[t._v("Email")]),e("th",[t._v("購買款項")]),e("th",[t._v("應付金額")]),e("th",[t._v("是否付款")])])}],ht={data(){return{pagination:{},orders:[]}},computed:{isLoading(){return this.$store.state.isLoading}},methods:{getOrders(t=1){const e=this;e.$store.dispatch("updateLoading",!0);const a="https://vue-course-api.hexschool.io",s="alex12030321";e.$http.get(`${a}/api/${s}/admin/orders?page=${t}`).then((t=>{e.orders=t.data.orders,e.pagination=t.data.pagination,e.$store.dispatch("updateLoading",!1)}))}},created(){this.getOrders(),this.$bus.$on("pageClick",((t=1)=>{this.getOrders(t)}))}},ft=ht,_t=(0,C.A)(ft,gt,vt,!1,null,null,null),Ct=_t.exports,bt=function(){var t=this,e=t._self._c;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn btn-danger my-3",on:{click:t.goCart}},[e("font-awesome-icon",{attrs:{icon:["fas","cart-shopping"]}}),t._v(" "+t._s(t.cart.carts?t.cart.carts.length:"")+" ")],1)]),e("div",{staticClass:"row"},t._l(t.products,(function(a){return a.is_enabled?e("div",{staticClass:"col-md-4 mb-4"},[e("div",{staticClass:"card border-0 shadow-sm"},[e("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{"background-image":`url(${a.imageUrl})`}}),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(a.category))]),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(a.title))])]),e("p",{staticClass:"card-text"},[t._v(t._s(a.content))]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(a.origin_price))+" 元")]),e("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t._f("currency")(a.price))+" 元")])])]),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.getProduct(a.id)}}},[a.id===t.status.itemLoading?e("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}}):t._e(),t._v(" 查看更多 ")],1),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addCart(a.id)}}},[a.id===t.status.cartLoading?e("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}}):t._e(),t._v(" 加到購物車 ")],1)])])]):t._e()})),0),e("div",{staticClass:"modal fade",attrs:{id:"productItemModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._m(0)]),e("div",{staticClass:"modal-body"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),e("h5",{staticClass:"my-3"},[t._v(t._s(t.product.title))]),e("p",{staticClass:"text-right"},[t._v(" __ ")]),e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(t.product.origin_price))+" 元")]),e("div",{staticClass:"h5 float-right"},[t._v("現在只要 "+t._s(t._f("currency")(t.product.price))+" 元")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"custom-select my-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"num",e.target.multiple?a:a[0])}}},t._l(10,(function(a){return e("option",{domProps:{value:a}},[t._v("選購 "+t._s(a)+" "+t._s(t.product.unit))])})),0)]),e("div",{staticClass:"modal-footer"},[e("h6",{staticClass:"text-secondary"},[t._v("小計 "+t._s(t._f("currency")(t.product.num*t.product.price)))]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addCart(t.product.id,t.product.num)}}},[t._v("加到購物車")])])])])])],1)},xt=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],yt={name:"CustomerOrders",data(){return{status:{itemLoading:"",cartLoading:""},products:[],product:{},pagination:{},cart:[],total:0}},computed:{isLoading(){return this.$store.state.isLoading}},methods:{getProducts(t=1){const e=this;e.$store.dispatch("updateLoading",!0);const a="https://vue-course-api.hexschool.io",s="alex12030321";e.$http.get(`${a}/api/${s}/products?page=${t}`).then((t=>{console.log(t.data),e.products=t.data.products,e.pagination=t.data.pagination,e.$store.dispatch("updateLoading",!1)}))},getProduct(t){const e=this;e.status.itemLoading=t,e.total=0;const a="https://vue-course-api.hexschool.io",s="alex12030321";e.$http.get(`${a}/api/${s}/product/${t}`).then((t=>{console.log(t.data),e.product=t.data.product,st()("#productItemModal").modal("show"),e.status.itemLoading=""}))},addCart(t,e=1){const a=this;a.status.cartLoading=t,a.total=0;const s="https://vue-course-api.hexschool.io",o="alex12030321";a.$http.post(`${s}/api/${o}/cart`,{data:{product_id:t,qty:e}}).then((t=>{console.log(t.data),st()("#productItemModal").modal("hide"),a.status.cartLoading="",alert(t.data.message),a.getCarts()}))},getCarts(){const t=this;t.total=0;const e="https://vue-course-api.hexschool.io",a="alex12030321";t.$http.get(`${e}/api/${a}/cart`).then((e=>{console.log(e.data.data),t.cart=e.data.data}))},goCart(){console.log(this.cart.carts),this.cart.carts.length?this.$router.push("cart"):this.$bus.$emit("message:push","購物車沒有商品","warning")}},created(){this.getProducts(),this.getCarts()}},$t=yt,wt=(0,C.A)($t,bt,xt,!1,null,null,null),kt=wt.exports,Pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-5 row justify-content-center"},[e("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.payOrder.apply(null,arguments)}}},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.order.products,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.final_total)))])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),e("table",{staticClass:"table"},[e("tbody",[e("tr",[e("th",{attrs:{width:"100"}},[t._v("Email")]),e("td",[t._v(t._s(t.order.user?t.order.user.email:""))])]),e("tr",[e("th",[t._v("姓名")]),e("td",[t._v(t._s(t.order.user?t.order.user.name:""))])]),e("tr",[e("th",[t._v("收件人電話")]),e("td",[t._v(t._s(t.order.user?t.order.user.tel:""))])]),e("tr",[e("th",[t._v("收件人地址")]),e("td",[t._v(t._s(t.order.user?t.order.user.address:""))])]),e("tr",[e("th",[t._v("付款狀態")]),e("td",[t.order.is_paid?e("span",{staticClass:"text-success"},[t._v("付款完成")]):e("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])]):t._e()])])},At=[function(){var t=this,e=t._self._c;return e("thead",[e("th",[t._v("品名")]),e("th",[t._v("數量")]),e("th",[t._v("單價")])])}],Lt={name:"CustomerCheckout",data(){return{orderId:"",order:{}}},methods:{getOrder(){const t=this;t.total=0;const e="https://vue-course-api.hexschool.io",a="alex12030321";t.$http.get(`${e}/api/${a}/order/${t.orderId}`).then((e=>{console.log(e.data),t.order=e.data.order}))},payOrder(){const t=this;t.total=0;const e="https://vue-course-api.hexschool.io",a="alex12030321";t.$http.post(`${e}/api/${a}/pay/${t.orderId}`).then((e=>{console.log(e.data),e.data.success?t.getOrder():t.$bus.$emit("message:push",e.data.message,"danger")}))}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},Mt=Lt,Nt=(0,C.A)(Mt,Pt,At,!1,null,null,null),Ot=Nt.exports,Dt=function(){var t=this,e=t._self._c;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("div",{staticClass:"my-5 row justify-content-center"},[e("div",{staticClass:"col-md-6"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.cart.carts,(function(a){return e("tr",[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.deleteCart(a.id)}}},[e("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1)]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" "),a.coupon?e("div",{staticClass:"text-success"},[t._v(" 已套用優惠券 ")]):t._e()]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.final_total)))])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t.cart.total!==t.cart.final_total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),e("td",{staticClass:"text-right text-success"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e()])]),e("div",{staticClass:"input-group mb-3 input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon,expression:"coupon"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.useCoupon.apply(null,arguments)},input:function(e){e.target.composing||(t.coupon=e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.useCoupon}},[t._v(" 套用優惠碼 ")])])])])]),e("div",{staticClass:"my-5 row justify-content-center"},[e("form",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useremail"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",id:"usertel",name:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("tel")?e("span",{staticClass:"text-danger"},[t._v("電話必須輸入")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"comment"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-success mx-3",on:{click:function(e){return e.preventDefault(),t.goBack.apply(null,arguments)}}},[t._v("回上一頁")]),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.createOrder.apply(null,arguments)}}},[t._v("送出訂單")])])])])],1)},Tt=[function(){var t=this,e=t._self._c;return e("thead",[e("th"),e("th",[t._v("品名")]),e("th",[t._v("數量")]),e("th",[t._v("單價")])])}],St={name:"Carts",data(){return{cart:[],coupon:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{addCart(t,e=1){const a=this;a.status.cartLoading=t,a.total=0;const s="https://vue-course-api.hexschool.io",o="alex12030321";a.$http.post(`${s}/api/${o}/cart`,{data:{product_id:t,qty:e}}).then((t=>{console.log(t.data),$("#productItemModal").modal("hide"),a.status.cartLoading="",alert(t.data.message),a.getCarts()}))},getCarts(){const t=this;t.total=0;const e="https://vue-course-api.hexschool.io",a="alex12030321";t.$http.get(`${e}/api/${a}/cart`).then((e=>{console.log(e.data.data),t.cart=e.data.data}))},deleteCart(t){const e=this;e.$store.dispatch("updateLoading",!0);const a="https://vue-course-api.hexschool.io",s="alex12030321";e.$http.delete(`${a}/api/${s}/cart/${t}`).then((t=>{console.log(t),e.getCarts(),e.$store.dispatch("updateLoading",!1)}))},useCoupon(){const t=this;t.$store.dispatch("updateLoading",!0);const e="https://vue-course-api.hexschool.io",a="alex12030321";t.$http.post(`${e}/api/${a}/coupon`,{data:{code:t.coupon}}).then((e=>{console.log(e),e.data.success?(t.getCarts(),t.$store.dispatch("updateLoading",!1),t.$bus.$emit("message:push",e.data.message,"success")):(t.$bus.$emit("message:push",e.data.message,"danger"),t.$store.dispatch("updateLoading",!1))}))},createOrder(){const t=this;t.$store.dispatch("updateLoading",!0);const e="https://vue-course-api.hexschool.io",a="alex12030321",s=t.form;this.$validator.validate().then((o=>{o?t.$http.post(`${e}/api/${a}/order`,{data:{user:s.user,message:s.message}}).then((e=>{console.log(e),e.data.success?t.$router.push("customer_checkout/"+e.data.orderId):(console.log(e),t.$bus.$emit("message:push",e.data.message,"danger"),t.$store.dispatch("updateLoading",!1))})):(t.$bus.$emit("message:push","表單輸入不完整","danger"),t.$store.dispatch("updateLoading",!1))}))},goBack(){this.$router.back()}},computed:{isLoading(){return this.$store.state.isLoading}},created(){this.getCarts()}},qt=St,jt=(0,C.A)(qt,Dt,Tt,!1,null,null,null),It=jt.exports,Et=function(){var t=this,e=t._self._c;return e("div",[e("nav",{staticClass:"navbar navbar-light bg-light"},[e("router-link",{staticClass:"navbar-brand no-boxshadow",attrs:{to:"/"}},[e("font-awesome-icon",{staticClass:"text-info",attrs:{icon:["fas","heart"]}}),t._v(" Alex Store ")],1),e("div",{staticClass:"dropdown ml-auto"},[e("button",{staticClass:"btn btn-sm btn-cart",attrs:{"data-toggle":"dropdown","data-flip":"false"}},[e("font-awesome-icon",{staticClass:"text-dark",attrs:{icon:["fas","shopping-cart"],size:"2xl"}}),e("span",{staticClass:"badge badge-pill badge-danger"},[t._v(t._s(t.cart.carts?t.cart.carts.length:""))]),e("span",{staticClass:"sr-only"},[t._v("unread messages")])],1),e("div",{staticClass:"dropdown-menu dropdown-menu-right p-3",staticStyle:{"min-width":"300px"},attrs:{"data-offset":"400"}},[e("h6",[t._v("已選擇商品")]),e("table",{staticClass:"table table-sm"},[e("tbody",t._l(t.cart.carts,(function(a){return t.cart.carts.length?e("tr",{key:a.id},[e("td",{staticClass:"align-middle text-center"},[e("a",{staticClass:"text-muted",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeCart(a.id)}}},[e("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1)]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+t._s(a.product.unit))]),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.total)))])]):t._e()})),0)]),e("button",{staticClass:"btn btn-primary btn-block",on:{click:t.goCart}},[e("i",{staticClass:"fa fa-cart-plus",attrs:{"aria-hidden":"true"}}),t._v(" 結帳去 ")])])])],1),t._m(0),e("div",{staticClass:"container main-content mb-3"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"list-group sticky-top"},[t._l(t.categories,(function(a){return e("a",{key:a,staticClass:"list-group-item list-group-item-action",class:{active:a===t.searchText},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.searchText=a}}},[e("font-awesome-icon",{attrs:{icon:["fas","street-view"]}}),t._v(" "+t._s(a)+" ")],1)})),e("a",{staticClass:"list-group-item list-group-item-action",class:{active:""===t.searchText},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.searchText=""}}},[t._v(" 全部顯示 ")])],2)]),e("div",{staticClass:"col-md-9"},[e("div",{staticClass:"d-flex mb-4"},[e("form",{staticClass:"form-inline my-3 my-lg-0"},[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search","aria-label":"Search"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){t.searchText=""}}},[e("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)])])]),e("button",{staticClass:"btn btn-outline-primary ml-auto",attrs:{type:"button"},on:{click:t.getProducts}},[t._v(" 重新取得資料 ")])]),e("div",{staticClass:"tab-pane",attrs:{id:"list-gift"}},[e("div",{staticClass:"row align-items-stretch"},t._l(t.filterData,(function(a){return e("div",{key:a.id,staticClass:"col-md-4 mb-4"},[e("div",{staticClass:"card border-0 box-shadow text-center h-100"},[e("img",{staticClass:"card-img-top",attrs:{src:a.imageUrl,alt:"Card image cap"}}),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"card-title"},[t._v(t._s(a.title))]),e("p",{staticClass:"card-text text-left"},[t._v(t._s(a.content))])]),e("div",{staticClass:"card-footer border-top-0 bg-white"},[e("button",{staticClass:"btn btn-outline-secondary btn-block btn-sm",on:{click:function(e){return t.addtoCart(a.id)}}},[e("font-awesome-icon",{attrs:{icon:["fas","cart-plus"]}}),t._v(" 加到購物車 ")],1)])])])})),0)])])])],1),e("footer",{staticClass:"bg-light text-muted py-5"},[e("div",{staticClass:"container"},[e("ul",{staticClass:"list-inline text-center"},[e("li",{staticClass:"list-inline-item"},[t._v("© Copright "+t._s((new Date).getFullYear())+" Alex Store ")]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[e("font-awesome-icon",{attrs:{icon:["fab","instagram"]}}),t._v(" Instagrame")],1)]),e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[e("font-awesome-icon",{attrs:{icon:["fab","facebook-square"]}}),t._v(" Facebook")],1)]),t._m(1)]),e("p",{staticClass:"text-center"},[t._v("Made with Bootstrap4")])])]),e("Alert")],1)},Ut=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"jumbotron jumbotron-fluid jumbotron-bg d-flex align-items-end"},[e("div",{staticClass:"container"},[e("div",{staticClass:"p-3 bg-lighter"},[e("h1",{staticClass:"display-3 font-weight-bold"},[t._v("買到剁手手！最後出清")]),e("p",{staticClass:"lead"},[t._v("This is a modified jumbotron that occupies the entire horizontal space of its parent.")])])])])},function(){var t=this,e=t._self._c;return e("li",{staticClass:"list-inline-item"},[e("a",{staticClass:"text-info",attrs:{href:"#"}},[t._v("About")])])}],Gt={name:"Home",components:{Alert:z},data(){return{searchText:""}},computed:{filterData(){const t=this;return t.searchText?t.products.filter((e=>{const a=e.title.toLowerCase().includes(t.searchText.toLowerCase());return a})):this.products},...(0,o.L8)(["isLoading","products","categories","cart"]),...(0,o.L8)("cartModule",["cart"])},methods:{addtoCart(t,e=1){console.log(this.$store),this.$store.dispatch("cartModule/addtoCart",{id:t,qty:e})},removeCart(t){this.$store.dispatch("cartModule/removeCart",t)},...(0,o.i0)(["getProducts"]),...(0,o.i0)("cartModule",["getCart","goCart"])},created(){this.getProducts(),this.getCart()}},Ft=Gt,Rt=(0,C.A)(Ft,Et,Ut,!1,null,"49c8d7e0",null),zt=Rt.exports;s.Ay.use(w.Ay);const Ht=[{path:"/",name:"Home",component:zt},{path:"*",redirect:"login"},{path:"/admin",name:"dashboard",component:Y,children:[{path:"products",name:"products",component:nt,meta:{requiresAuth:!0}},{path:"coupon",name:"Coupon",component:mt,meta:{requiresAuth:!0}},{path:"order",name:"order",component:Ct,meta:{requiresAuth:!0}}]},{path:"/",name:"dashboard",component:Y,children:[{path:"customer_orders",name:"CustomerOrders",component:kt},{path:"cart",name:"Cart",component:It},{path:"customer_checkout/:orderId",name:"CustomerCheckout",component:Ot}]},{path:"/login",name:"login",component:Z}],Bt=new w.Ay({routes:Ht,linkActiveClass:"active"});var Wt=Bt,Yt={state:{products:[],categories:[]},actions:{getProducts(t){const e="https://vue-course-api.hexschool.io/api/alex12030321/products/all";t.commit("LOADING",!0),i.A.get(e).then((e=>{t.commit("PRODUCTS",e.data.products),t.commit("CATEGORIES"),t.commit("LOADING",!1)}))}},mutations:{PRODUCTS(t,e){t.products=e},CATEGORIES(t){const e=new Set;console.log(t),t.products.forEach((t=>{e.add(t.category)})),t.categories=Array.from(e)}},getters:{products(t){return t.products},categories(t){return t.categories}}},Qt={namespaced:!0,state:{cart:{carts:[]}},actions:{getCart(t){t.commit("LOADING",!0,{root:!0});const e="https://vue-course-api.hexschool.io/api/alex12030321/cart";i.A.get(e).then((e=>{e.data.data.carts&&t.commit("CART",e.data.data),t.commit("LOADING",!1,{root:!0}),console.log("取得購物車",e.data.data)}))},removeCart(t,e){const a=`https://vue-course-api.hexschool.io/api/alex12030321/cart/${e}`;t.commit("LOADING",!0,{root:!0}),i.A.delete(a).then((e=>{t.commit("LOADING",!1,{root:!0}),this.dispatch("cartModule/getCart"),console.log("刪除購物車項目",e)}))},addtoCart(t,{id:e,qty:a}){const s="https://vue-course-api.hexschool.io/api/alex12030321/cart",o={product_id:e,qty:a};t.commit("LOADING",!0,{root:!0}),i.A.post(s,{data:o}).then((e=>{t.commit("LOADING",!1,{root:!0}),this.dispatch("cartModule/getCart"),console.log("加入購物車:",e)}))},goCart(t){console.log(t),console.log(this._vm),t.state.cart.carts.length?Wt.push("/cart"):this._vm.$bus.$emit("message:push","購物車沒有商品","warning")}},mutations:{CART(t,e){t.cart=e}},getters:{cart(t){return t.cart}}},Vt={state:{isLoading:!1},actions:{updateLoading(t,e){t.commit("LOADING",e)}},mutations:{LOADING(t,e){t.isLoading=e}},getters:{isLoading(t){return t.isLoading}}};s.Ay.use(o.Ay);var Xt=new o.Ay.Store({modules:{productsModule:Yt,cartModule:Qt,isLoadingModule:Vt}});function Jt(t){const e=Number(t);return`$ ${e.toFixed(0).replace(/./g,((t,e,a)=>{const s=e&&"."!==t&&(a.length-e)%3===0?`, ${t}`.replace(/\s/g,""):t;return s}))}`}s.Ay.prototype.$bus=new s.Ay;var Kt=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"d-flex justify-content-center",attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.pageClick(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(a){return e("li",{staticClass:"page-item",class:{active:t.pagination.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.pageClick(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.pageClick(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},Zt=[],te={name:"pagination",props:["pagination"],methods:{pageClick(t){console.log(t),this.$bus.$emit("pageClick",t)}}},ee=te,ae=(0,C.A)(ee,Kt,Zt,!1,null,null,null),se=ae.exports;s.Ay.use(o.Ay),s.Ay.use(r.A,i.A),s.Ay.use(g.Ay),g.Ay.Validator.localize("zh_TW",h()),s.Ay.component("font-awesome-icon",d.gc),s.Ay.component("loading",l()),s.Ay.component("Pagination",se),s.Ay.filter("currency",Jt),c.Yv.add(u.Cvc,p.X7I,m.C91),s.Ay.config.productionTip=!1,i.A.defaults.withCredentials=!0,new s.Ay({store:Xt,router:Wt,render:t=>t(y),created(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t}}).$mount("#app"),Wt.beforeEach(((t,e,a)=>{if(t.meta.requiresAuth){const t="https://vue-course-api.hexschool.io",e=`${t}/api/user/check`;i.A.post(e).then((t=>{t.data.success?a():(alert(t.data.message),a({path:"/login"}))}))}else a()}))}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,o,i){if(!s){var r=1/0;for(d=0;d<t.length;d++){s=t[d][0],o=t[d][1],i=t[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(n=!1,i<r&&(r=i));if(n){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,o,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,i,r=s[0],n=s[1],l=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(l)var d=l(a)}for(e&&e(s);c<r.length;c++)i=r[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},s=self["webpackChunkvue_dashboard_record"]=self["webpackChunkvue_dashboard_record"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(9844)}));s=a.O(s)})();
//# sourceMappingURL=app.0b39e8b9.js.map